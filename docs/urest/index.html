<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>urest API documentation</title>
<meta name="description" content="Micro REST-Style API Server …" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Package <code>urest</code></h1>
</header>
<section id="section-intro">
<p>Micro REST-Style API Server.</p>
<p>This is a simple HTTP server, specialised to the delivery of a REST-like API
instead of a general HTTP server. The design, and the use of the <code>asyncio</code>
library, is inspired by the <a href="https://github.com/erikdelange/MicroPython-HTTP-Server">MicroPython HTTP
Server</a> by Erik de
Lange. This library uses a roughly similar structure for the core of the
<code>asyncio</code> drivers, and especially in the <code>HTTPResponse</code> class. Differences
include</p>
<ul>
<li>
<p>A more object-oriented design of the call/response handler, made easier this
library is <em>not</em> a general HTTP server. For instance Python <code>getters</code> and
<code>setters</code> are used where possible for input validation, and the central API
response is based on the <code>APICall</code> abstract base class</p>
</li>
<li>
<p>A more explicit validation of input from the network layer, especially in the
assumption that all input is by default hostile. This library should serve as an
example of best-practice in protocol handling; at least in the slightly resource
constrained environment of MicroPython.</p>
</li>
</ul>
<h2 id="notes">Notes</h2>
<ol>
<li>
<p>This implementation is principally a teaching library, so the documentation
should be at least as important as the 'code'. Where possible all algorithms and
implementation techniques should also be explained as fully as possible, or at
least linked to reference standards/implementations.</p>
</li>
<li>
<p>All documentation should be attached to the relevant code wherever possible,
and should be formatted according to the <a href="&lt;https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst&gt;
.txt">NumPy
Documentation</a> docstring
standard. Documentation is generated by the
<a href="https://pdoc3.github.io/pdoc/">pdoc</a> library, and should be rebuilt before
committing any code. Use the <code>hook.sh</code> script as a pre-commit hook for <code>git</code>, or</p>
<blockquote>
<p>pdoc &ndash;html &ndash;force &ndash;output-dir doc .</p>
</blockquote>
<p>in the source directory</p>
</li>
<li>
<p>For consistency, all code should also be in the format standardised by the
<a href="https://github.com/psf/black">Black</a> library. This makes it easier to
co-ordinate external code and documentation with the implementation documented
here.</p>
</li>
</ol>
<h2 id="example">Example</h2>
<h3 id="creating-the-application-main-loop">Creating the Application <code>main</code> loop</h3>
<p>This module assumes that the lower-level networking layers are already in place:
if you are using MicroPython that may mean additional work. You will also need a
copy of the <code>asyncio</code> library (or <code>uasyncio</code> in MicroPython. This can be
imported conditionally as</p>
<pre><code class="language-python">   # Import the Asynchronous IO Library,
   # preferring the MicroPython library if
   # available
   try:
     import uasyncio as asyncio
   except ImportError:
    import asyncio
</code></pre>
<p>Once the network and asynchronous I/O library is available, create an instance
of the <code><a title="urest.http.server.RESTServer" href="http/server.html#urest.http.server.RESTServer">RESTServer</a></code> class from the <code><a title="urest.http.server" href="http/server.html">urest.http.server</a></code> module</p>
<pre><code class="language-python">  from urest.http import RESTServer

  app = RESTServer()
</code></pre>
<p>The application <code>app</code> above can now we passed to an appropriate event loop of
the <code>asyncio</code> library, for instance as</p>
<pre><code class="language-python">  if __name__ == &quot;__main__&quot;:
    loop = asyncio.get_event_loop()
    loop.create_task(app.start())
    loop.run_forever()
</code></pre>
<p>Putting the above together, a minimal main loop looks something like</p>
<pre><code class="language-python">  # Import the Asynchronous IO Library
  try:
    import uasyncio as asyncio
  except ImportError:
    import asyncio

    from urest.http import RESTServer

    app = RESTServer()

    if __name__ == &quot;__main__&quot;:
      loop = asyncio.get_event_loop()
      loop.create_task(app.start())
      loop.run_forever()
</code></pre>
<h2 id="licence">Licence</h2>
<p>This module, and all included code, is made available under the terms of the MIT
Licence</p>
<blockquote>
<p>Copyright 2022-2023, David Love</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
</blockquote>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;Micro REST-Style API Server.

This is a simple HTTP server, specialised to the delivery of a REST-like API
instead of a general HTTP server. The design, and the use of the `asyncio`
library, is inspired by the [MicroPython HTTP
Server](https://github.com/erikdelange/MicroPython-HTTP-Server) by Erik de
Lange. This library uses a roughly similar structure for the core of the
`asyncio` drivers, and especially in the `HTTPResponse` class. Differences
include

* A more object-oriented design of the call/response handler, made easier this
library is _not_ a general HTTP server. For instance Python `getters` and
`setters` are used where possible for input validation, and the central API
response is based on the `APICall` abstract base class

* A more explicit validation of input from the network layer, especially in the
assumption that all input is by default hostile. This library should serve as an
example of best-practice in protocol handling; at least in the slightly resource
constrained environment of MicroPython.

Notes
-----

1. This implementation is principally a teaching library, so the documentation
should be at least as important as the &#39;code&#39;. Where possible all algorithms and
implementation techniques should also be explained as fully as possible, or at
least linked to reference standards/implementations.

2. All documentation should be attached to the relevant code wherever possible,
and should be formatted according to the [NumPy
Documentation](https://github.com/numpy/numpy/blob/master/doc/HOWTO_DOCUMENT.rst
.txt) docstring  standard. Documentation is generated by the
[pdoc](https://pdoc3.github.io/pdoc/) library, and should be rebuilt before
committing any code. Use the `hook.sh` script as a pre-commit hook for `git`, or

    &gt;  pdoc --html --force --output-dir doc .

    in the source directory

3. For consistency, all code should also be in the format standardised by the
[Black](https://github.com/psf/black) library. This makes it easier to
co-ordinate external code and documentation with the implementation documented
here.

Example
-------

### Creating the Application `main` loop

This module assumes that the lower-level networking layers are already in place:
if you are using MicroPython that may mean additional work. You will also need a
copy of the `asyncio` library (or `uasyncio` in MicroPython. This can be
imported conditionally as

```python
   # Import the Asynchronous IO Library,
   # preferring the MicroPython library if
   # available
   try:
     import uasyncio as asyncio
   except ImportError:
    import asyncio
```

Once the network and asynchronous I/O library is available, create an instance
of the `urest.http.server.RESTServer` class from the `urest.http.server` module

```python
  from urest.http import RESTServer

  app = RESTServer()
```

The application `app` above can now we passed to an appropriate event loop of
the `asyncio` library, for instance as

```python
  if __name__ == &#34;__main__&#34;:
    loop = asyncio.get_event_loop()
    loop.create_task(app.start())
    loop.run_forever()
```

Putting the above together, a minimal main loop looks something like

```python
  # Import the Asynchronous IO Library
  try:
    import uasyncio as asyncio
  except ImportError:
    import asyncio

    from urest.http import RESTServer

    app = RESTServer()

    if __name__ == &#34;__main__&#34;:
      loop = asyncio.get_event_loop()
      loop.create_task(app.start())
      loop.run_forever()
```

Licence
-------

This module, and all included code, is made available under the terms of the MIT
Licence

&gt; Copyright 2022-2023, David Love

&gt; Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &#34;Software&#34;), to deal in
the Software without restriction, including without limitation the rights to
use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of
the Software, and to permit persons to whom the Software is furnished to do so,
subject to the following conditions:

&gt; The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

&gt; THE SOFTWARE IS PROVIDED &#34;AS IS&#34;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS
FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR
COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER
IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

&#34;&#34;&#34;</code></pre>
</details>
</section>
<section>
<h2 class="section-title" id="header-submodules">Sub-modules</h2>
<dl>
<dt><code class="name"><a title="urest.api" href="api/index.html">urest.api</a></code></dt>
<dd>
<div class="desc"><p>Abstract base class and helper classes for the server-proivded REST API …</p></div>
</dd>
<dt><code class="name"><a title="urest.http" href="http/index.html">urest.http</a></code></dt>
<dd>
<div class="desc"><p>Network interface and helper classes for abstracting the underlying HTTP stream …</p></div>
</dd>
</dl>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#notes">Notes</a></li>
<li><a href="#example">Example</a><ul>
<li><a href="#creating-the-application-main-loop">Creating the Application main loop</a></li>
</ul>
</li>
<li><a href="#licence">Licence</a></li>
</ul>
</div>
<ul id="index">
<li><h3><a href="#header-submodules">Sub-modules</a></h3>
<ul>
<li><code><a title="urest.api" href="api/index.html">urest.api</a></code></li>
<li><code><a title="urest.http" href="http/index.html">urest.http</a></code></li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>